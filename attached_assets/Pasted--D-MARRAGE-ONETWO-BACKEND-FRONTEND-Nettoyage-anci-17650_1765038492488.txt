ğŸš€ DÃ‰MARRAGE ONETWO - BACKEND + FRONTEND
========================================

ğŸ§¹ Nettoyage anciens processus...
âœ… Ports nettoyÃ©s

ğŸ”§ DÃ©marrage backend (port 3001)...
âœ… Backend PID: 1495
 [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }

ğŸ­ [STARTUP] Initialisation layer storage...

ğŸ­ [STORAGE] Initialisation Factory Storage
âœ… [STORAGE] Backend: REPLIT (Neon PostgreSQL)
ğŸ“Š [STORAGE] Backend actif: REPLIT


ğŸ” [STARTUP] VÃ©rification des secrets Doppler...
ğŸ“§ RESEND_API_KEY: âœ… CHARGÃ‰ (re_iYEmPrW...)
ğŸ“± TWILIO_ACCOUNT_SID: âœ… CHARGÃ‰
ğŸ“± TWILIO_AUTH_TOKEN: âœ… CHARGÃ‰
ğŸ“± TWILIO_PHONE_NUMBER: âœ… CHARGÃ‰
â±ï¸ [CLEANUP] Interval de nettoyage: 5 minutes

âœ… [BACKEND] DÃ©marrÃ© sur http://0.0.0.0:3001
ğŸ“¡ [PROXY] Frontend sur 5000 â†’ API sur 3001
ğŸš€ OneTwo application ready!

ğŸ¨ DÃ©marrage frontend (port 5000)...

  VITE v6.4.1  ready in 331 ms

  âœ  Local:   http://localhost:5000/
  âœ  Network: http://172.31.66.226:5000/
  âœ  press h + enter to show help

A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
ğŸ‘¤ [CHECK-PSEUDO] VÃ©rification: gabriel
âœ… [CHECK-PSEUDO] Pseudonyme disponible
ğŸ“§ [CHECK-EMAIL] VÃ©rification: cnaisofc04@gmail.com
âœ… [CHECK-EMAIL] Email disponible

ğŸŸ¢ [SESSION] DÃ©but crÃ©ation session
ğŸ“ [SESSION] Body: {
  "language": "fr",
  "pseudonyme": "gabriel",
  "dateOfBirth": "1989-12-07",
  "email": "cnaisofc04@gmail.com",
  "phone": "+33624041138",
  "gender": "Mr",
  "password": "@Pass2025"
}
ğŸŒ [SESSION] Langue: fr
âœ… [SESSION] Validation rÃ©ussie
ğŸ“§ [SESSION] Email: cnaisofc04@gmail.com
ğŸ‘¤ [SESSION] Pseudonyme: gabriel
ğŸ” [SESSION] VÃ©rification email existant...
âœ… [SESSION] Email disponible
ğŸ” [SESSION] VÃ©rification pseudonyme existant...
âœ… [SESSION] Pseudonyme disponible
ğŸ” [SESSION] Hachage du mot de passe...
âœ… [SESSION] Mot de passe hachÃ©
ğŸ’¾ [SESSION] CrÃ©ation en base de donnÃ©es...
âœ… [SESSION] Session crÃ©Ã©e: fc635072-3a23-4987-9524-151637a3cc1a
ğŸ“± [SESSION] TÃ©lÃ©phone enregistrÃ©: +33624041138
ğŸ‘¤ [SESSION] Genre enregistrÃ©: Mr
ğŸ”‘ [SESSION] GÃ©nÃ©ration code email...
ğŸ”‘ [VERIFY] Code gÃ©nÃ©rÃ©: 889412 (âœ… crypto-secure)
ğŸ“¬ [SESSION] Code: 889412 (expire: 2025-12-06T16:18:47.550Z)
ğŸ’¾ [SESSION] Enregistrement code en base...
âœ… [SESSION] Code enregistrÃ©
ğŸ“§ [SESSION] Envoi email...
ğŸ“§ [EMAIL] Tentative envoi Ã  cnaisofc04@gmail.com avec code 889412
âœ… [EMAIL] EnvoyÃ© avec succÃ¨s: unknown
âœ… [SESSION] Email envoyÃ©
ğŸ”‘ [SESSION] GÃ©nÃ©ration code SMS...
ğŸ”‘ [VERIFY] Code gÃ©nÃ©rÃ©: 673742 (âœ… crypto-secure)
ğŸ“¬ [SESSION] Code SMS: 673742 (expire: 2025-12-06T16:18:47.728Z)
ğŸ’¾ [SESSION] Enregistrement code SMS en base...
âœ… [SESSION] Code SMS enregistrÃ©
ğŸ“± [SESSION] Envoi SMS...
ğŸ“± [SMS] Tentative envoi Ã  +33624041138 avec code 673742
âŒ [SMS] Erreur: RestException [Error]: 'From' +76225300881 is not a Twilio phone number or Short Code country mismatch
    at success (/home/runner/workspace/node_modules/twilio/lib/base/Version.js:79:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Function.sendPhoneVerification (/home/runner/workspace/server/verification-service.ts:64:24)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:161:23) {
  status: 400,
  code: 21659,
  moreInfo: 'https://www.twilio.com/docs/errors/21659',
  details: undefined
}
âŒ [SESSION] SMS Ã‰CHEC
âš ï¸  [SESSION] Code SMS visible en console pour test: 673742
ğŸ‰ [SESSION] RÃ©ponse envoyÃ©e au client


ğŸ”µ [VERIFY-EMAIL-API] DÃ©but vÃ©rification email
ğŸ”µ [VERIFY-EMAIL-API] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
ğŸ”µ [VERIFY-EMAIL-API] Body: {
  "code": "673742"
}
ğŸ” [VERIFY-EMAIL-API] VÃ©rification du code: 673742
âŒ [VERIFY-EMAIL-API] Code invalide ou expirÃ©

ğŸ”µ [VERIFY-EMAIL-API] DÃ©but vÃ©rification email
ğŸ”µ [VERIFY-EMAIL-API] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
ğŸ”µ [VERIFY-EMAIL-API] Body: {
  "code": "889412"
}
ğŸ” [VERIFY-EMAIL-API] VÃ©rification du code: 889412
âœ… [VERIFY-EMAIL-API] Email vÃ©rifiÃ© avec succÃ¨s!
ğŸ“– [GET-SESSION] RÃ©cupÃ©ration session: fc635072-3a23-4987-9524-151637a3cc1a
âœ… [GET-SESSION] Session trouvÃ©e

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "city": "Paris"
}
ğŸ†” [LOCATION] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session fc635072-3a23-4987-9524-151637a3cc1a: { city: 'Paris' }
âœ… [STORAGE] Location mise Ã  jour pour session fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: non dÃ©fini
ğŸ›‚ [LOCATION] NationalitÃ©: non dÃ©finie

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "country": "France"
}
ğŸ†” [LOCATION] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session fc635072-3a23-4987-9524-151637a3cc1a: { country: 'France' }
âœ… [STORAGE] Location mise Ã  jour pour session fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: France
ğŸ›‚ [LOCATION] NationalitÃ©: non dÃ©finie

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "nationality": "Bresilienne"
}
ğŸ†” [LOCATION] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session fc635072-3a23-4987-9524-151637a3cc1a: { nationality: 'Bresilienne' }
âœ… [STORAGE] Location mise Ã  jour pour session fc635072-3a23-4987-9524-151637a3cc1a
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: France
ğŸ›‚ [LOCATION] NationalitÃ©: Bresilienne

ğŸ¯ [COMPLETE] DÃ©but finalisation inscription
ğŸ†” [COMPLETE] SessionId: fc635072-3a23-4987-9524-151637a3cc1a
âœ… [COMPLETE] Session trouvÃ©e
ğŸ“‹ [COMPLETE] Ã‰tat de session avant vÃ©rifications:
  - emailVerified: true
  - phoneVerified: true
  - gender: Mr
  - password: ***
  - phone: +33624041138
  - geolocationConsent: true
  - termsAccepted: true
  - deviceBindingConsent: true
ğŸ” [COMPLETE] VÃ©rification consentements: true
âœ… [COMPLETE] Toutes les vÃ©rifications OK - CRÃ‰ATION USER
ğŸ’¾ [COMPLETE] CrÃ©ation utilisateur final...
âœ… [COMPLETE] Utilisateur crÃ©Ã©: 84a2ac3d-26ae-490e-98da-4ab67948cd4a
ğŸ™ï¸ [COMPLETE] Ville: Paris
ğŸŒ [COMPLETE] Pays: France
ğŸ›‚ [COMPLETE] NationalitÃ©: Bresilienne
ğŸ—‘ï¸ [COMPLETE] Suppression session temporaire...
âœ… [COMPLETE] Session supprimÃ©e
ğŸ‰ [COMPLETE] Inscription finalisÃ©e avec succÃ¨s!

ğŸ” [STORAGE] CrÃ©ation token reset pour cnaisofc04@gmail.com
âœ… [STORAGE] Token reset crÃ©Ã© pour cnaisofc04@gmail.com
ğŸ“§ [PASSWORD-RESET] Tentative envoi email reset Ã  cnaisofc04@gmail.com
âœ… [PASSWORD-RESET] Email envoyÃ© avec succÃ¨s: unknown
ğŸ“§ [FORGOT-PASSWORD] Email de rÃ©initialisation envoyÃ© Ã  cnaisofc04@gmail.com