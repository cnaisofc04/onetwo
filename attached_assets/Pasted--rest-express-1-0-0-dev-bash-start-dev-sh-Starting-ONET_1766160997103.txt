
> rest-express@1.0.0 dev
> bash start-dev.sh

Starting ONETWO - Backend + Frontend
=====================================
Loading Doppler secrets...
Doppler secrets loaded
  - RESEND_API_KEY: OK
  - TWILIO_ACCOUNT_SID: OK
  - TWILIO_AUTH_TOKEN: OK
  - TWILIO_PHONE_NUMBER: OK
Starting backend (port 3001)...
Backend PID: 765
ğŸ“§ Secrets chargÃ©s:
  - RESEND_API_KEY: [CONFIGURED]
  - TWILIO_ACCOUNT_SID: [CONFIGURED]
  - TWILIO_AUTH_TOKEN: [CONFIGURED]
  - TWILIO_PHONE_NUMBER: [CONFIGURED]
ğŸ“§ Services de verification:
  - Resend (Email): âœ… CONFIGURE
  - Twilio (SMS): âœ… CONFIGURE
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ“¡ add observability to secrets: https://dotenvx.com/ops

ğŸ­ [STARTUP] Initialisation layer storage...

ğŸ­ [STORAGE] Initialisation Factory Storage
âœ… [STORAGE] Backend: REPLIT (Neon PostgreSQL)
ğŸ“Š [STORAGE] Backend actif: REPLIT


ğŸ” [STARTUP] VÃ©rification des secrets Doppler...
ğŸ“§ RESEND_API_KEY: âœ… CHARGÃ‰ (re_3giC8Gv...)
ğŸ“± TWILIO_ACCOUNT_SID: âœ… CHARGÃ‰
ğŸ“± TWILIO_AUTH_TOKEN: âœ… CHARGÃ‰
ğŸ“± TWILIO_PHONE_NUMBER: âœ… CHARGÃ‰
â±ï¸ [CLEANUP] Interval de nettoyage: 5 minutes

âœ… [BACKEND] DÃ©marrÃ© sur http://0.0.0.0:3001
ğŸ“¡ [PROXY] Frontend sur 5000 â†’ API sur 3001
ğŸš€ OneTwo application ready!

Starting frontend (port 5000)...

  VITE v6.4.1  ready in 221 ms

  âœ  Local:   http://localhost:5000/
  âœ  Network: http://172.31.70.2:5000/
  âœ  press h + enter to show help

A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
ğŸ‘¤ [CHECK-PSEUDO] VÃ©rification: Gabriel
âœ… [CHECK-PSEUDO] Pseudonyme disponible
ğŸ“§ [CHECK-EMAIL] VÃ©rification: cnaisofc04@gmail.com
âœ… [CHECK-EMAIL] Email disponible

ğŸŸ¢ [SESSION] DÃ©but crÃ©ation session
ğŸ“ [SESSION] Body: {
  "language": "pt-BR",
  "pseudonyme": "Gabriel",
  "dateOfBirth": "1989-12-07",
  "email": "cnaisofc04@gmail.com",
  "phone": "+33624041138",
  "gender": "Mr",
  "password": "@Pass2025"
}
ğŸŒ [SESSION] Langue: pt-BR
âœ… [SESSION] Validation rÃ©ussie
ğŸ“§ [SESSION] Email: cnaisofc04@gmail.com
ğŸ‘¤ [SESSION] Pseudonyme: Gabriel
ğŸ” [SESSION] VÃ©rification email existant...
âœ… [SESSION] Email disponible
ğŸ” [SESSION] VÃ©rification pseudonyme existant...
âœ… [SESSION] Pseudonyme disponible
ğŸ” [SESSION] Hachage du mot de passe...
âœ… [SESSION] Mot de passe hachÃ©
ğŸ’¾ [SESSION] CrÃ©ation en base de donnÃ©es...
âœ… [SESSION] Session crÃ©Ã©e: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
ğŸ“± [SESSION] TÃ©lÃ©phone enregistrÃ©: +33624041138
ğŸ‘¤ [SESSION] Genre enregistrÃ©: Mr
ğŸ”‘ [SESSION] GÃ©nÃ©ration code email...
ğŸ”‘ [VERIFY] Code gÃ©nÃ©rÃ©: 401750 (âœ… crypto-secure)
ğŸ“¬ [SESSION] Code: 401750 (expire: 2025-12-19T16:21:11.937Z)
ğŸ’¾ [SESSION] Enregistrement code en base...
âœ… [SESSION] Code enregistrÃ©
ğŸ“§ [SESSION] Envoi email...
ğŸ“§ [EMAIL] Tentative envoi RÃ‰EL Ã  cnaisofc04@gmail.com avec code 401750
âœ… [EMAIL] EnvoyÃ© avec succÃ¨s via Resend: b306f9dc-18b0-42ea-a77c-74c5e9d33dd3
âœ… [SESSION] Email envoyÃ©
ğŸ”‘ [SESSION] GÃ©nÃ©ration code SMS...
ğŸ”‘ [VERIFY] Code gÃ©nÃ©rÃ©: 962113 (âœ… crypto-secure)
ğŸ“¬ [SESSION] Code SMS: 962113 (expire: 2025-12-19T16:21:12.261Z)
ğŸ’¾ [SESSION] Enregistrement code SMS en base...
âœ… [SESSION] Code SMS enregistrÃ©
ğŸ“± [SESSION] Envoi SMS...
ğŸ“± [SMS] Tentative envoi RÃ‰EL Ã  +33624041138 avec code 962113
âœ… [SMS] EnvoyÃ© avec succÃ¨s via Twilio: SMda3cf8ab490d7009200ccb9e3cab89af
âœ… [SESSION] SMS envoyÃ©
ğŸ‰ [SESSION] RÃ©ponse envoyÃ©e au client


ğŸ”µ [VERIFY-EMAIL-API] DÃ©but vÃ©rification email
ğŸ”µ [VERIFY-EMAIL-API] SessionId: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
ğŸ”µ [VERIFY-EMAIL-API] Body: {
  "code": "401750"
}
ğŸ” [VERIFY-EMAIL-API] VÃ©rification du code: 401750
âœ… [VERIFY-EMAIL-API] Email vÃ©rifiÃ© avec succÃ¨s!
ğŸ“– [GET-SESSION] RÃ©cupÃ©ration session: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [GET-SESSION] Session trouvÃ©e

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "city": "Paris"
}
ğŸ†” [LOCATION] SessionId: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session 00d8714b-9e7e-4b7f-9891-7e53cb044e89: { city: 'Paris' }
âœ… [STORAGE] Location mise Ã  jour pour session 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: non dÃ©fini
ğŸ›‚ [LOCATION] NationalitÃ©: non dÃ©finie

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "country": "France"
}
ğŸ†” [LOCATION] SessionId: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session 00d8714b-9e7e-4b7f-9891-7e53cb044e89: { country: 'France' }
âœ… [STORAGE] Location mise Ã  jour pour session 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: France
ğŸ›‚ [LOCATION] NationalitÃ©: non dÃ©finie

ğŸŒ [LOCATION] DÃ©but mise Ã  jour localisation
ğŸ“ [LOCATION] Body: {
  "nationality": "Bresilienne"
}
ğŸ†” [LOCATION] SessionId: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Validation rÃ©ussie
ğŸ’¾ [LOCATION] Mise Ã  jour en base...
ğŸ’¾ [STORAGE] Mise Ã  jour location session 00d8714b-9e7e-4b7f-9891-7e53cb044e89: { nationality: 'Bresilienne' }
âœ… [STORAGE] Location mise Ã  jour pour session 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [LOCATION] Localisation mise Ã  jour
ğŸ™ï¸ [LOCATION] Ville: Paris
ğŸŒ [LOCATION] Pays: France
ğŸ›‚ [LOCATION] NationalitÃ©: Bresilienne

ğŸ¯ [COMPLETE] DÃ©but finalisation inscription
ğŸ†” [COMPLETE] SessionId: 00d8714b-9e7e-4b7f-9891-7e53cb044e89
âœ… [COMPLETE] Session trouvÃ©e
ğŸ“‹ [COMPLETE] Ã‰tat de session avant vÃ©rifications:
  - emailVerified: true
  - phoneVerified: true
  - gender: Mr
  - password: ***
  - phone: +33624041138
  - geolocationConsent: true
  - termsAccepted: true
  - deviceBindingConsent: true
ğŸ” [COMPLETE] VÃ©rification consentements: true
âœ… [COMPLETE] Toutes les vÃ©rifications OK - CRÃ‰ATION USER
ğŸ’¾ [COMPLETE] CrÃ©ation utilisateur final...
âœ… [COMPLETE] Utilisateur crÃ©Ã©: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ™ï¸ [COMPLETE] Ville: Paris
ğŸŒ [COMPLETE] Pays: France
ğŸ›‚ [COMPLETE] NationalitÃ©: Bresilienne
ğŸ—‘ï¸ [COMPLETE] Suppression session temporaire...
âœ… [COMPLETE] Session supprimÃ©e
ğŸ‰ [COMPLETE] Inscription finalisÃ©e avec succÃ¨s!

ğŸ§  [ONBOARDING] Sauvegarde personnalitÃ© pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] CrÃ©ation profil pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil crÃ©Ã©: bdb2170f-a20e-416a-a6d0-cf99f2a923f2
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] PersonnalitÃ© sauvegardÃ©e
ğŸ’• [ONBOARDING] Sauvegarde objectifs relationnels pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] Objectifs relationnels sauvegardÃ©s
ğŸŒˆ [ONBOARDING] Sauvegarde prÃ©fÃ©rences orientation pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] PrÃ©fÃ©rences orientation sauvegardÃ©es
ğŸ™ [ONBOARDING] Sauvegarde religion pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] Religion sauvegardÃ©e
ğŸ‘ï¸ [ONBOARDING] Sauvegarde couleur yeux pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] Couleur yeux sauvegardÃ©e
ğŸ’‡ [ONBOARDING] Sauvegarde couleur cheveux pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] Couleur cheveux sauvegardÃ©e
âš™ï¸ [ONBOARDING] Sauvegarde prÃ©fÃ©rences dÃ©taillÃ©es pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] PrÃ©fÃ©rences dÃ©taillÃ©es sauvegardÃ©es
ğŸŒ‘ [ONBOARDING] Sauvegarde zone d'ombre pour userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ” [ONBOARDING] Recherche profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
ğŸ“ [ONBOARDING] Mise Ã  jour profil userId: 39165470-db5d-4e10-96d6-71e5c777df9f
âœ… [ONBOARDING] Profil mis Ã  jour
âœ… [ONBOARDING] Zone d'ombre sauvegardÃ©e